- form_for [:admin, carousel], :html => { :id => 'wrap' } do |f|
  = hidden_field_tag 'page_id', page_id if defined?(page_id) && !page_id.blank?

  .backgrounds.big-header
    = f.text_field :title
    .interact-links
      .borders.interact-button-left
      = submit_tag I18n.t('save_changes').capitalize, :class => 'backgrounds interact-button'
      .borders.interact-button-right
      = I18n.t('or')
      = link_to I18n.t('cancel').capitalize, admin_widgets_path, :class => 'back-link'

  #content.grid_12.alpha.omega
    .inner-content
      .fieldset
        %h2
          = I18n.t('widget_settings').capitalize
        -#= f.label :news_since, I18n.t('wactuality.actualities_since').capitalize
        -#= f.date_select :news_since, :prompt => true      

      #carousel_items.sortable.widget-list
        = render :partial => 'admin/carousel_items/list', :locals => { :carousel => @carousel }

  #right-sidebar.grid_4.alpha.omega
    .step
      %a.backgrounds.button{ :href => new_admin_carousel_item_path(carousel) }
        %span.big-icons.add-picture
          = I18n.t('picture.add').capitalize
    .step
      -#= link_to I18n.t('preview'), '#', :class => 'small-icons preview'
      = content_tag :span, I18n.t('preview').capitalize, :class => 'small-icons preview disabled'
      - unless carousel.new_record?
        = link_to I18n.t('duplicate'), [:duplicate, :admin, carousel], :class => 'small-icons duplicate'
        = link_to I18n.t('delete'), [:admin, carousel], :confirm => I18n.t('carousel.destroy.confirm').capitalize, :method => :delete, :class => 'small-icons delete'
    .step.open
      %a.small-icons.step-title{ :href => "#" }
        = "#{I18n.t('widget.link.create.action').capitalize} :"
      #association-carousel-page-tree.inner-step
        %ul
          = render :partial => 'admin/blocks/associated_pages', :locals => { :categories => @page_categories, :pages => @pages, :block => carousel, :element_id => 'carousel' }
      .clear
    .step.open
      %a.small-icons.step-title{ :href => "#" }
        = "#{I18n.t('folder.associated_to').capitalize} :"
      #association-carousel-tree.inner-step
        %ul
          = render :partial => 'admin/categories/associated_elements', :locals => { :association_id => 'block_category_ids', :element => carousel, :category_ids => carousel.block_category_ids, :categories => WidgetCategory.find_all_by_parent_id(nil) }
      .clear
  .clear

= render :partial => 'admin/carousel_items/forms', :locals => { :carousel => @carousel}
