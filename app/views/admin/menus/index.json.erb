<%
  output = {
    :sEcho => params[:sEcho],
    :iTotalRecords => @menus.total_entries || 0,
    :iTotalDisplayRecords => @menus.size,
    :aaData => @menus.collect do |menu|
      klass = menu.active? ? 'see-on' : 'see-off'
      [
        content_tag(:div, content_tag(:div, tag(:span, :class => "small-icons menu-ico"), :class=>"image"), :id => polymorphic_html_id(menu),
        content_tag(:div, link_to(menu.name, [forgeos_cms, :edit, :admin, menu]), :class => 'menu-name'),
        link_to('', [forgeos_cms, :activate, :admin, menu],
         :remote => true,
         :class => "small-icons #{klass}",
         :id => polymorphic_html_id(menu, 'show')
        ),
        link_to('', [forgeos_cms, :duplicate, :admin, menu], :class => 'small-icons duplicate-link') +
        link_to('', [forgeos_cms, :edit, :admin, menu], :class => 'small-icons edit-link') +
        link_to('', [forgeos_cms, :admin, menu],
          :remote => true,
          :method => :delete,
          :confirm => t('menu.destroy.confirm').capitalize,
          :class => 'small-icons destroy-link',
          :id => polymorphic_html_id(menu, 'destroy')
        )
      ]
    end
  }
-%>
<%= raw output.to_json %>
