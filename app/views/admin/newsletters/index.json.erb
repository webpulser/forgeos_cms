<%
  output = {
    :sEcho => params[:sEcho],
    :iTotalRecords => @newsletters.total_entries || 0,
    :iTotalDisplayRecords => @newsletters.size,
    :aaData => @newsletters.collect do |newsletter|
      link_id = newsletter.id
      [
        content_tag(:div, link_to(newsletter.email, [forgeos_cms, :edit, :admin, newsletter])),
        content_tag(:div, newsletter.created_at.to_s),
        link_to('', [forgeos_cms, :edit, :admin, newsletter], :class => 'small-icons edit-link') +
        link_to('', [forgeos_cms, :admin, newsletter],
          :remote => true,
          :method => :delete,
          :confirm => t('menu.destroy.confirm').capitalize,
          :success => "removedataTablesRow('#destroy_#{link_id}')",
          :class => 'small-icons destroy-link',
          :id => "destroy_#{link_id}"
        )
      ]
    end
  }
-%>
<%= raw output.to_json %>
